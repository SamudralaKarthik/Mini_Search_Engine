next prev Building python script Let's start building python script that system startup block access particular websites. Open PyCharm edit code want. Create Python Script named web-blocker.py. make process understandable you, will build this script step step. let's start coding setting required variables. Setting variables This step initializes required variables that will used script. Here, host_path path hosts file. case, located under /etc. python, used represent string. redirect assigned localhost address, i.e. 127.0.0.1. websites list which contains website lists that blocked. host_path r"/etc/hosts" redirect "127.0.0.1" websites ["www.facebook.com", "https://www.facebook.com"] Setting infinite loop need have while loop python script make sure that script will every seconds. make this happen, will sleep() method time module. import time host_path r"/etc/hosts" redirect "127.0.0.1" websites ["www.facebook.com", "https://www.facebook.com"] while True: time.sleep(5) Determining time process build desired python script, need check current time whether working time time since application will block website access during working time. check current time, will datetime module. will check whether datetime.now() greater than datetime object current date lesser than datetime object current date. Let's discuss more output datetime.now(). returns datetime object containing current time including year (2019), month(January 1st), date(23rd), time (hour, minutes, seconds). compare this value check whether this value exists between current date current date using statement. script will contain following code. from time import from datetime import host_path r"/etc/hosts" redirect "127.0.0.1" websites ["www.facebook.com", "https://www.facebook.com"] while True: datetime(datetime.now().year,datetime.now().month,datetime.now().day,9)< datetime.now()< datetime(datetime.now().year,datetime.now().month,datetime.now().day,17): print("Working hours") else: print("Fun hours") sleep(5) Writing hosts file main objective script keep modifying hosts file regular intervals. script configure hosts file, need implement file handling methods here. following code added hosts file. with open(host_path,"r+") fileptr: content fileptr.read() website websites: website content: pass else: fileptr.write(redirect+" 					"+website+"\n") open() method opens file stored host_path mode. First all, read content file using read() method store variable named content. loop iterates over website list (websites) will check each item list whether already present content. present hosts file content, then must pass. Otherwise, must write redirect-website mapping hosts file that website hostname will redirected localhost. hosts file will contain following python code. from time import from datetime import host_path r"/etc/hosts" redirect "127.0.0.1" websites ["www.facebook.com", "https://www.facebook.com"] while True: datetime(datetime.now().year,datetime.now().month,datetime.now().day,9)<datetime.now()<datetime(datetime.now().year,datetime.now().month,datetime.now().day,17): print("working hours") with open(host_path,"r+") fileptr: content fileptr.read() website websites: website content: pass else: fileptr.write(redirect+" "+website+"\n") else: print("Fun hours") sleep(5) Now, let's this python script check whether modified hosts file not. see, keeps printing working hours console working hours. Now, let's check content hosts file. see, lines have been added hosts file. will redirect access Facebook localhost. Removing from hosts file script working fine working hours, lets some features hours also. hours (not working hours) must remove added lines from hosts file that access blocked websites will granted. following code added else part (fun hours case) script. with open(host_path,'r+') file: content file.readlines(); file.seek(0) line content: any(website line website in		websites): file.write(line) file.truncate() print("fun hours") else part will executed during hours, removes mappings that block access some specific websites computer. Let's check content hosts file execution python script during hours. final script Now, have python script which running fine block access some particular websites during working hours PM) provide access during hours. script web-blocker.py given below. web-blocker.py from time import from datetime import host_path r"/etc/hosts" redirect "127.0.0.1" websites ["www.facebook.com", "https://www.facebook.com"] while True: datetime(datetime.now().year,datetime.now().month,datetime.now().day,9)<datetime.now()<datetime(datetime.now().year,datetime.now().month,datetime.now().day,17): with open(host_path,"r+") fileptr: content fileptr.read() website websites: website content: pass else: fileptr.write(redirect+" 	"+website+"\n") else: with open(host_path,'r+') file: content file.readlines(); file.seek(0) line content: any(website line website 				websites): file.write(line) file.truncate() sleep(5) Next TopicScript Deployment Linux prev next